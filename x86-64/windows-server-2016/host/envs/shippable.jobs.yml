jobs:
  - name: x86-64-windows-server-2016-host-envs-single
    type: runSh
    runtime:
      architecture: x86_64
      os: WindowsServer_2016
      container: false
    flags:
      - x86-64
      - windows-server-2016
      - x86-64-windows-server-2016-host-envs
    steps:
      - IN: x86-64-trigger
      - IN: windows-server-2016-trigger
      - TASK:
          name: should-pass-for-single-envs
          runtime:
            options:
              env:
                HELLO: world
          script:
            - gci env:*
            - if ( "$env:HELLO" -ne "world" ) { Write-Error "incorrect env" }
            
  - name: x86-64-windows-server-2016-host-envs-multiple
    type: runSh
    runtime:
      architecture: x86_64
      os: WindowsServer_2016
      container: false
    flags:
      - x86-64
      - windows-server-2016
      - x86-64-windows-server-2016-host-envs
    steps:
      - IN: x86-64-trigger
      - IN: windows-server-2016-trigger
      - TASK:
          name: should-pass-for-multiple-envs
          runtime:
            options:
              env:
                HELLO: world
                HI: there
          script:
            - gci env:*
            - if ( "$env:HELLO" -ne "world" ) { Write-Error "incorrect env" }
            - if ( "$env:HI" -ne "there" ) { Write-Error "incorrect env" }

  - name: x86-64-windows-server-2016-host-envs-inbuilt
    type: runSh
    runtime:
      architecture: x86_64
      os: WindowsServer_2016
      container: false
    flags:
      - x86-64
      - windows-server-2016
      - x86-64-windows-server-2016-host-envs
    steps:
      - IN: x86-64-trigger
      - IN: windows-server-2016-trigger
      - TASK:
          name: should-have-inbuilt-envs
          runtime:
            options:
              env:
                HELLO: world
          script:
            - gci env:*
            - if ( "$env:SHIPPABLE_NODE_ARCHITECTURE" -ne "x86_64" ) { Write-Error "incorrect env" }
            - if ( "$env:SHIPPABLE_NODE_OPERATING_SYSTEM" -ne "WindowsServer_2016" ) { Write-Error "incorrect env" }
            - if ( "$env:TASK_NAME" -ne "should-have-inbuilt-envs" ) { Write-Error "incorrect env" }
            - if ( "$env:TASK_IN_CONTAINER" -ne "False" ) { Write-Error "incorrect env" }
